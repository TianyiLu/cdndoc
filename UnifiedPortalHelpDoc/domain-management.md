# 域名管理

当您在左侧的导航窗格中单击 “域名管理”时，将显示您目前已经创建的所有CDN加速域名的列表视图。 你可以通过Azure订阅下拉列表选择不同的订阅查看不同订阅下的CDN加速域名信息。同时可以对加速域名进行**“修改配置”**，**“缓存规则配置”**和**“访问控制管理”**。

##加速域名列表视图

![][1]

###域名列表视图包括：

-   加速域名
-   CDN 域名
-   源站地址
-   加速类型 （目前支持“网站加速”，“下载加速”和“HTTP点播加速”）
-   状态

源站地址是CDN所缓存内容的原始位置。 加速域名是用于访问CDN缓存内容的域名，该域名必须有相应的ICP备案信息。

CDN域名是由Windows Azure CDN平台提供，都是以 **.mschcdn.com**结尾。

>**注意**
>您需要在CDN服务生效后（60分钟内），对你的加速域名配置CNAME映射信息，映射到微软提供的CDN域名。


加速域名状态有以下几种：

-    开启
-    关闭(包括ICP审核，需要CNAME配置，禁用等非**开启**状态)

>**注意**
>只有状态为**开启**的域名才可以正常使用CDN服务。

## 缓存规则配置视图
 
![][2]

如上图，系统会根据缓存规则设置默认规则。用户可以根据需求加以调整。用户规则优先匹配，如果用户规则未命中，则逐条执行系统默认缓存规则。


### 缓存规则配置

用户点击“配置缓存规则”后，可以根据需求设置对域名的缓存规则，包括：

- 根据目录进行配置

	目录必须以 "/" 开头，比如： "/pic", "/doc", "/htdoc/data" 等等。后台会匹配指定目录下的所有文件，**包括子目录**。

- 根据文件后缀配置

	常用文件后缀名，比如："jpg", "png", "gif", "txt", "m4v", "mp3" 等等。后台会匹配 **所有文件夹下** 指定的文件后缀。

- 根据全路径配置

	用来指定 **一个文件**，必须以 "/" 开头。比如："/sites/doc/example.doc"。**注意**：如果用户填的全路径是"/"，则它匹配首页。

>**注意**
>用户填写配置规则时，字符串中不要包含 “{”, “}”, “(”, “)”, “[”, “]”, “.”, “?", “*”, “\”, “^”, “$” 等特殊字符。

>**注意**
>时间填为0表示禁止缓存。

### 缓存配置顺序

系统根据配置顺序**逐条匹配**，最先配置的规则具有最高优先级。规则被匹配后，其后的规则**不再**被匹配。

### 预定义模板

用户可以通过 “应用预定义模板” 快速创建缓存配置规则。上图列出了用户选中“应用预定义模板”后，选择“常见文件”后创建的一个规则。用户可以根据需求对自动创建的规则进行修改。

### 访问控制管理
通过访问控制管理，用户可以设置配置Referer黑白名单，从而实现防盗链。

![][3]

当防盗链开启之后，便可以编辑外链规则。每条规则是一个路径和文件名的组合。比如/ *.png表示根目录下所有的png文件。

每条规则是一个路径和文件名的组合。比如/ *.png表示根目录下所有的png文件。

- 如果设置了黑名单，那么当Referer在黑名单里面的时候，不允许访问，其他情况可以访问。
- 如果设置了白名单，那么只有当Referer是白名单中的域名时，才可以访问 。

点击“提交”按钮之后，会等待操作结束，并显示操作是否成功。如果点击“提交并关闭”按钮，那么对话框会立即关闭。当用户下次再打开对话框时，会显示上次操作的状态。

[1]: images/003.png
[2]: images/cache-policy-2.png
[3]: images/access-control.png